---
# tasks file for artifactory
- name: Install Java 11
  include_role:
    name: geerlingguy.java
    tasks_from: java
  vars:
    java_packages:
      - java-11-openjdk
      - java-11-openjdk-devel
- name: Add Artifactory Yum Repository
  yum_repository:
    name: jfrog-artifactory
    description: JFrog Artifactory RPM Repository
    baseurl: https://releases.jfrog.io/artifactory/artifactory-rpms
    gpgcheck: yes
    gpgkey: https://releases.jfrog.io/artifactory/api/gpg/key/public
    enabled: yes
- name: Update Yum Cache and Install Artifactory
  yum:
    name:
      - jfrog-artifactory-oss
    state: present
    update_cache: yes
- name: Start and Enable Artifactory
  service:
    name: artifactory
    state: started
    enabled: yes